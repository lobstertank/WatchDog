# WatchDog - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –§–∏–Ω–æ–ª–æ–≥–∞

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞

**WatchDog** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ —Å—á–µ—Ç–∞—Ö —á–µ—Ä–µ–∑ API –§–∏–Ω–æ–ª–æ–≥–∞ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ Telegram. –°–∏—Å—Ç–µ–º–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Å—Å–æ–≤—ã–µ —Ä–∞–∑—Ä—ã–≤—ã.

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ **Telegram –±–æ—Ç** —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîç **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ –≤ –§–∏–Ω–æ–ª–æ–≥–µ
- üìä **–ü—Ä–æ–≥–Ω–æ–∑ –±–∞–ª–∞–Ω—Å–æ–≤** –Ω–∞ 12 –º–µ—Å—è—Ü–µ–≤ –≤–ø–µ—Ä–µ–¥
- ‚ö†Ô∏è **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–∞—Å—Å–æ–≤—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤** –∏ —É–≥—Ä–æ–∂–∞—é—â–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
- üìÖ **–£—á–µ—Ç —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤** –∏ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- ‚öôÔ∏è **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Telegram Bot  ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§  WatchDog Core   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§  Finolog API    ‚îÇ
‚îÇ   (–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è) ‚îÇ    ‚îÇ  (–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö) ‚îÇ    ‚îÇ  (–ò—Å—Ç–æ—á–Ω–∏–∫)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚ñ≤                       ‚ñ≤                       ‚ñ≤
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Cron Scheduler‚îÇ    ‚îÇ  Holiday System  ‚îÇ    ‚îÇ  Data Storage   ‚îÇ
‚îÇ   (–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫)  ‚îÇ    ‚îÇ  (–ö–∞–ª–µ–Ω–¥–∞—Ä—å)     ‚îÇ    ‚îÇ  (JSON —Ñ–∞–π–ª—ã)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
- **`launcher.py`** (11 —Å—Ç—Ä–æ–∫) - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
- **`launcher_test.py`** (11 —Å—Ç—Ä–æ–∫) - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞
- **`telegram_bot.py`** (70 —Å—Ç—Ä–æ–∫) - Telegram –±–æ—Ç –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **`api_functions.py`** (285 —Å—Ç—Ä–æ–∫) - API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –§–∏–Ω–æ–ª–æ–≥–∞ –∏ —Ä–∞—Å—á–µ—Ç—ã
- **`telegram_functions.py`** (95 —Å—Ç—Ä–æ–∫) - —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram
- **`holiday_checker_json.py`** (134 —Å—Ç—Ä–æ–∫–∏) - —Ä–∞–±–æ—Ç–∞ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- **`holiday_updater_minimal.py`** (167 —Å—Ç—Ä–æ–∫) - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –¥–∞–Ω–Ω—ã–µ
- **`config.py`** (35 —Å—Ç—Ä–æ–∫) - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **`contacts.py`** (25 —Å—Ç—Ä–æ–∫) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **`holidays_2025.json`** - –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ 2025
- **`holidays_2026.json`** - –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ 2026
- **`requirements.txt`** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python

### –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
- **`run_bot.sh`** - –∑–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
- **`run_bot_with_holidays.sh`** - –∑–∞–ø—É—Å–∫ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- **`run_holiday_updater.sh`** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –§–∏–Ω–æ–ª–æ–≥–∞
```python
FINOLOG_CONFIG = {
    'api_key': 'GXqFgOgsHOoTXbKDd9ff3dafa24ae865c48291100fe7cf82J14wlR8WCucDv4Gu',
    'biz_id': '53850',
    'base_url': 'https://api.finolog.ru/v1'
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```python
MONITORING_CONFIG = {
    'months_ahead': 12,        # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—è—Ü–µ–≤ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞
}

THREATENING_CONFIG = {
    'account_ids': [190104],   # ID —Å—á–µ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–≥—Ä–æ–∂–∞—é—â–∏—Ö –±–∞–ª–∞–Ω—Å–æ–≤
    'threshold': 100000,       # –ü–æ—Ä–æ–≥ —É–≥—Ä–æ–∂–∞—é—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –≤ —Ä—É–±–ª—è—Ö
    'days_ahead': 356,         # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–æ–≤
```python
# –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –±–æ—Ç
MAIN_BOT_CONFIG = {
    'bot_token': '8363091905:AAE8n7P1PwuQrmQRIGYPSLmgi9ceNgIY9lE',
    'allowed_users': [13553737, 2095138167]  # –í–∞—à ID –∏ –õ–µ–Ω–∞
}

# –¢–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç
TEST_BOT_CONFIG = {
    'bot_token': '8351421023:AAEmidqjJjbkVOT3CRwLQ7LFlvaWWTUGfO0',
    'allowed_users': [13553737]  # –¢–æ–ª—å–∫–æ –í–∞—à ID
}
```

## ‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

### Cron –∑–∞–¥–∞—á–∏
```bash
# –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å 9:00 –¥–æ 18:00 –∫–∞–∂–¥—ã–π —á–∞—Å
0 9-18 * * * cd /home/sheinin/watchdog && ./run_bot.sh >> /home/sheinin/watchdog/logs/cron.log 2>&1

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤: 14:00 –≤ –ø–µ—Ä–≤—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞
0 14 1-7 * 1 cd /home/sheinin/watchdog && ./run_holiday_updater.sh >> /home/sheinin/watchdog/logs/holiday_updater.log 2>&1
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏
2. **–ê–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∏ —É–≥—Ä–æ–∂–∞—é—â–∏–µ –±–∞–ª–∞–Ω—Å—ã
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–æ–±–ª–µ–º
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –µ–∂–µ–º–µ—Å—è—á–Ω–æ

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### API –∑–∞–ø—Ä–æ—Å—ã
–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ API –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –§–∏–Ω–æ–ª–æ–≥—É:

- **–ë—ã–ª–æ:** 18+ –∑–∞–ø—Ä–æ—Å–æ–≤ (1 –¥–ª—è —Å—á–µ—Ç–æ–≤ + 17 –¥–ª—è –±–∞–ª–∞–Ω—Å–æ–≤ + N –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- **–°—Ç–∞–ª–æ:** 2-3 –∑–∞–ø—Ä–æ—Å–∞ (1 –¥–ª—è —Å—á–µ—Ç–æ–≤ —Å –±–∞–ª–∞–Ω—Å–∞–º–∏ + 1-2 –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** –≤ 6-9 —Ä–∞–∑! üöÄ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π:** `api_functions.py` (API) + `telegram_functions.py` (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ summary:** –±–∞–ª–∞–Ω—Å—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –æ—Ç–≤–µ—Ç–∞ `/account` endpoint
- **–¢–∞–π–º–∞—É—Ç—ã:** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞ API –∑–∞–ø—Ä–æ—Å–∞—Ö
- **–£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:** —É–±—Ä–∞–Ω–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è `get_current_balance()`

## üöÄ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p ~/watchdog
cd ~/watchdog

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
sudo timedatectl set-timezone Europe/Moscow
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
scp launcher.py telegram_bot.py api_functions.py telegram_functions.py config.py contacts.py n8n-server:~/watchdog/
scp holiday_checker_json.py holiday_updater_minimal.py n8n-server:~/watchdog/

# –î–∞–Ω–Ω—ã–µ –∏ —Å–∫—Ä–∏–ø—Ç—ã
scp holidays_2025.json holidays_2026.json requirements.txt n8n-server:~/watchdog/
scp run_bot.sh run_bot_with_holidays.sh run_holiday_updater.sh n8n-server:~/watchdog/
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```bash
cd ~/watchdog
chmod +x *.sh
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
cat > /tmp/watchdog_cron << 'EOF'
0 9-18 * * * cd /home/sheinin/watchdog && ./run_bot.sh >> /home/sheinin/watchdog/logs/cron.log 2>&1
0 14 1-7 * 1 cd /home/sheinin/watchdog && ./run_holiday_updater.sh >> /home/sheinin/watchdog/logs/holiday_updater.log 2>&1
EOF

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
crontab /tmp/watchdog_cron

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ cron
sudo systemctl restart cron
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–ª—è –ª–æ–≥–æ–≤
```bash
mkdir -p ~/watchdog/logs
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
- **`~/watchdog/logs/cron.log`** - –ª–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
- **`~/watchdog/logs/holiday_updater.log`** - –ª–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- **`~/watchdog/bot.log`** - —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ö–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f ~/watchdog/logs/cron.log

# –õ–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
grep "$(date +%Y-%m-%d)" ~/watchdog/logs/cron.log

# –°—Ç–∞—Ç—É—Å cron
systemctl status cron

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–¥–∞—á cron
crontab -l
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
cd ~/watchdog

# –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
python3 holiday_checker_json.py

# –¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
python3 holiday_updater_minimal.py

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
./run_bot.sh

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞
python3 launcher_test.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π
python3 -c "import telegram_bot; import api_functions; import telegram_functions; print('OK')"

# –¢–µ—Å—Ç API –§–∏–Ω–æ–ª–æ–≥–∞
python3 -c "from api_functions import get_all_accounts; print(len(get_all_accounts()))"

# –¢–µ—Å—Ç Telegram –±–æ—Ç–∞
python3 -c "from telegram_bot import send_telegram_message; print('Bot OK')"
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd ~/watchdog
tar -czf WG_backup_$(date +%d%m%H%M).tgz *.py *.json *.sh *.txt *.md

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É
scp n8n-server:~/watchdog/WG_backup_*.tgz ./
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
scp launcher.py telegram_bot.py api_functions.py telegram_functions.py config.py contacts.py n8n-server:~/watchdog/
scp holiday_checker_json.py n8n-server:~/watchdog/

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞
scp run_bot.sh n8n-server:~/watchdog/
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
ssh n8n-server "cd ~/watchdog && python3 -c 'import launcher; print(\"OK\")'"

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
ssh n8n-server "cd ~/watchdog && timeout 10s ./run_bot.sh"
```

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Cron –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   ```bash
   sudo systemctl status cron
   sudo systemctl restart cron
   ```

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å**
   ```bash
   timedatectl
   sudo timedatectl set-timezone Europe/Moscow
   ```

3. **–ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã**
   ```bash
   chmod +x ~/watchdog/*.sh
   ```

4. **–û—à–∏–±–∫–∏ API**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞ –≤ config.py
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
   curl -I https://api.finolog.ru/v1/
   ```

5. **–ü—Ä–æ–±–ª–µ–º—ã —Å Telegram**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
   curl -I https://api.telegram.org/
   ```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep python

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ cron
sudo journalctl -u cron -n 20

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ping api.finolog.ru
ping api.telegram.org
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **–û–±—â–∏–π –æ–±—ä–µ–º –∫–æ–¥–∞:** 600+ —Å—Ç—Ä–æ–∫ –≤ 7 Python —Ñ–∞–π–ª–∞—Ö (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** 100%
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ + –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** 10 –∑–∞–ø—É—Å–∫–æ–≤ –≤ –¥–µ–Ω—å (9:00-18:00)
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–º–µ—Å—è—á–Ω–æ
- **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** Finolog + Telegram
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≥–æ–¥—ã:** 2025-2026
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –£–¥–∞–ª–µ–Ω–æ 5 –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (33% –∫–æ–¥–∞)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `allowed_users`
- –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ —Å–ª—É–∂–µ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

## üìö –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

### api_functions.py
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –§–∏–Ω–æ–ª–æ–≥–æ–º –∏ —Ä–∞—Å—á–µ—Ç—ã
**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `make_request(url, timeout=30)` - –±–∞–∑–æ–≤—ã–π API –∑–∞–ø—Ä–æ—Å —Å —Ç–∞–π–º–∞—É—Ç–æ–º
- `get_all_accounts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ —Å –±–∞–ª–∞–Ω—Å–∞–º–∏
- `get_current_balances(accounts)` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å—á–µ—Ç–æ–≤
- `get_all_transactions_for_all_accounts(account_ids, start_date)` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤
- `calculate_daily_balances()` - —Ä–∞—Å—á–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
- `analyze_all_accounts_balances()` - –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

### telegram_functions.py
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram
**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `send_telegram_message(bot_token, chat_id, text)` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `send_positive_balance_report()` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Å—Ç–∞—Ç–∫–∞—Ö
- `send_balance_analysis_report()` - –µ–¥–∏–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –∞–Ω–∞–ª–∏–∑–µ –æ—Å—Ç–∞—Ç–∫–æ–≤

### telegram_bot.py
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã
**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `check_and_notify()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `main()` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
- `send_telegram_message_wrapper()` - –æ–±–µ—Ä—Ç–∫–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–µ–π –≤ `config.py`
2. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
3. –õ–æ–≥–∏ –≤ `~/watchdog/logs/`
4. –°—Ç–∞—Ç—É—Å cron —Å–µ—Ä–≤–∏—Å–∞
5. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 18.09.2025  
**–ê–≤—Ç–æ—Ä:** WatchDog Development Team
